<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>使用Bower进行前端依赖管理</title>
    <meta name="description" content="">
    <!--<link rel="stylesheet" href="/assets/css/bootstrap.min.css">-->
    <!--<link rel="stylesheet" href="/assets/css/font-awesome.min.css">-->
    <link rel="icon" type="image/png" href="/favicon.ico">
    <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://fonts.useso.com/css?family=Roboto">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/syntax-highlight.css">
    
    <link rel="stylesheet" href="/assets/css/proj-layout.css">
    <script src="/assets/js/swiftype.js"></script>
    <!--<script src="/assets/js/jquery.js"></script>-->
    <!--<script src="/assets/js/modernizr.min.js"></script>-->
    <!--<script src="/assets/js/bootstrap.min.js"></script>-->
</head>

<body>
    <header>
    <nav class="navbar navbar-default" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <p class="site-name"><a class="navbar-brand" href="/" title="twolun">双轮行</a></p>
            </div>
            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="/">HOME</a></li>
                    <li><a href="/about.html">About</a></li>
                    <li><a href="/project.html">Projects</a></li>
                    <li><a href="/list.html">Posts</a></li>
                    <li><a href="http://wwsun.lofter.com/" target="_blank">Lofter</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- .site-navigation -->
</header>
    <div id="post-content" class="container">
        <br>
        <div class="well">
            <header class="page-header">
                <h1>使用Bower进行前端依赖管理</h1>
                <p class="post-meta">Jan 6, 2015</p>
            </header>
            <article><p>Bower是一个用于管理前端依赖的包管理器（Package Manager），该开源项目由Twitter创建。与此相对应的包括，PHP的<code class="highlighter-rouge">Composer</code>，Node的<code class="highlighter-rouge">NPM</code>，和Ruby的<code class="highlighter-rouge">RubyGems</code>。本文通过结合官方文档和一些简单的实例来展示Bower是如何提升开发效率的。
<!--more--></p>

<blockquote>
  <p>2015/03/08 update</p>
</blockquote>

<h2 id="bower">为什么要用Bower</h2>

<p>使用类似于<a href="http://bower.io/">Bower</a>这样的包管理器主要基于以下几个原因：</p>

<ul>
  <li>方便的寻找和下载你需要的依赖库，并将它们整合到项目中，例如jQuery, Angular等。</li>
  <li>方便的下载指定版本的依赖库（免除去网络上搜索和下载）</li>
  <li>便于你使用简单的方法获取你想要的依赖库</li>
</ul>

<h3 id="bower-1">安装Bower</h3>
<p>Bower依赖于Node.js，Git（资源主要通过git进行下载），因此你需要提前安装好，才能正常安装bower。 Bower可以通过NPM进行安装：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ npm install -g bower 	//全局安装bower
$ bower --version 		//检查版本确认是否安装好
1.3.12  				//本文使用的bower版本
</code></pre>
</div>

<h3 id="section">基础使用</h3>

<p>Bower的基础使用，可以参考<a href="http://segmentfault.com/a/1190000000349555">这篇文章</a>。本文依然会介绍Bower的常用使用细节，但综合了多篇文章和Bower的官方文档。下面我们通过一个示例项目来使用Bower,首先创建项目目录</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ bower help			//帮助命令
$ mkdir bower-in-action
$ cd bower-in-action
$ mkdir jquery-in-action
$ cd jquery-in-action
</code></pre>
</div>

<p>安装jQuery和Bootstrap依赖</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ bower install jquery
$ bower install bootstrap
</code></pre>
</div>

<p>项目会自动生成<code class="highlighter-rouge">bower_components</code>目录，jquery和bootstrap的相关文件都会被下载到该文件夹内。</p>

<p>安装依赖可以有很多种方式，主要包括以下4种方式：</p>

<div class="highlighter-rouge"><pre class="highlight"><code># registered package
$ bower install jquery
# GitHub shorthand
$ bower install desandro/masonry
# Git endpoint
$ bower install git://github.com/user/package.git
# URL
$ bower install http://example.com/script.js
</code></pre>
</div>

<p>卸载包</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ bower uninstall jquery
</code></pre>
</div>

<p>搜索相关的依赖，你可以使用如下工具</p>

<div class="highlighter-rouge"><pre class="highlight"><code>http://bower.io/search/
</code></pre>
</div>

<p>当然你也可以使用一个bower指令来搜索，但不如web页面来的方便直观</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ bower search bootstrap
</code></pre>
</div>

<h2 id="bower-2">在项目中设置Bower</h2>

<p>为了在项目中使用<code class="highlighter-rouge">Bower</code>，你需要下面两个文件</p>

<ul>
  <li><code class="highlighter-rouge">.bowerrc</code> 用于告诉Bower需要将依赖安装在什么地方</li>
  <li><code class="highlighter-rouge">bower.json</code> 用于告诉Bower需要安装那些依赖</li>
</ul>

<h3 id="bower-3">定义Bower目录</h3>

<p>Bower的默认目录为项目根目录下的<code class="highlighter-rouge">bower_components</code>，通常我们不想使用这个文件夹。我们可以创建<code class="highlighter-rouge">.bowerrc</code>文件，并在其中使用JSON语法配置目录信息：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>// .bowerrc
{
    "directory": "libs"
}
</code></pre>
</div>

<p>接来下，我们安装的依赖包都会下载到这个目录中。</p>

<h3 id="section-1">安装多个依赖包</h3>

<p>为我们通常通过<code class="highlighter-rouge">bower.json</code>文件来管理依赖包。可以通过下面的的命令生成<code class="highlighter-rouge">bower.json</code>文件：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>bower init
</code></pre>
</div>

<p>它会自动提示你输入一系列的内容，以生成最终的文件，包括项目名称、版本号、作者信息、项目描述信息、关键词、开源证书等等。关于bower.josn文件的详细解释可以参考<a href="http://bower.io/docs/creating-packages/#bowerjson">链接页面</a>，这里示例文件如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jquery-in-action"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"authors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Weiwei &lt;ww.sun@outlook.com&gt;"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test bower using jquery &amp; bootstrap"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"keywords"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"jquery"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bootstrap"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"license"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MIT"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"dependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"bootstrap"</span><span class="p">:</span><span class="w"> </span><span class="s2">"latest"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"font-awesome"</span><span class="p">:</span><span class="w"> </span><span class="s2">"latest"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"animate.css"</span><span class="p">:</span><span class="w"> </span><span class="s2">"latest"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"angular"</span><span class="p">:</span><span class="w"> </span><span class="s2">"latest"</span><span class="w">    
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"devDependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"angular"</span><span class="p">:</span><span class="w"> </span><span class="s2">"~1.3.8"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>需要注意的是，这里有两个版本的依赖，一个是<code class="highlighter-rouge">dependencies</code>，另一个是<code class="highlighter-rouge">devDependencies</code>，分别代表生产环境和开发环境中的依赖包，两种环境在很多情况下有区别，比如在开发环境中我们通常使用jquery.js、开启详细的日志；在生产环境中通常使用jquery.min.js、向用户暴露简单的错误信息。它们可以分别通过下面两个指令自动添加：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>bower install jquery --save			//添加到dependencies
bower install angular --save-dev		//添加到devDependencies
</code></pre>
</div>

<h2 id="bower-4">使用Bower包</h2>

<p>下面我们来编写一个示例页面来引入我们需要的包：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;!-- index.html --&gt;
&lt;!doctype&gt;
&lt;head&gt;
    &lt;link rel="stylesheet" href="libs/bootstrap/dist/css/bootstrap.min.css"&gt;
    &lt;link rel="stylesheet" href="libs/font-awesome/css/font-awesome.min.css"&gt;
    &lt;link rel="stylesheet" href="libs/animate.css/animate.min.css"&gt;

    &lt;script src="libs/jquery/jquery.min.js"&gt;&lt;/script&gt;
    &lt;script src="libs/bootstrap/dist/js/bootstrap.min.js"&gt;&lt;/script&gt;
    &lt;script src="libs/angular/angular.min.js"&gt;&lt;/script&gt;
&lt;/head&gt;

...
</code></pre>
</div>

<h3 id="section-2">其他配置信息</h3>

<p>Bower可以通过<code class="highlighter-rouge">.bowerrc</code>文件进行配置，它是一个JSON文件，你可以直接在项目的根目录创建该文件，通过该文件我们可以指定bower的依赖安装目录，网关服务器，超时连接等配置信息，该文件的详细配置参数的说明见<a href="http://bower.io/docs/config/">链接页面</a>。内容如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"directory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bower_components"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"analytics"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">120000</span><span class="p">,</span><span class="w">
  </span><span class="nt">"registry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"search"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"http://localhost:8000"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"https://bower.herokuapp.com"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h2 id="bower-5">使用Bower只下载你需要的文件</h2>

<p>这里请参考<a href="https://scotch.io/tutorials/only-grab-the-files-you-need-while-using-bower">链接</a>。</p>

<h2 id="references">References</h2>

<ol>
  <li>http://bower.io/</li>
  <li>http://bower.io/docs/creating-packages/#bowerjson</li>
  <li>http://bower.io/docs/tools/</li>
  <li>http://segmentfault.com/a/1190000000349555</li>
  <li>http://bower.io/docs/config/</li>
  <li>https://scotch.io/tutorials/manage-front-end-resources-with-bower</li>
  <li>https://scotch.io/tutorials/only-grab-the-files-you-need-while-using-bower</li>
</ol>
</article>
        </div>
    </div><!--#post-content-->

    <div id="ds-comment" class="container">
        <div class="ds-thread" data-thread-key="/posts/bower-post.html" data-title="使用Bower进行前端依赖管理"></div>
        <script>
            var duoshuoQuery = {short_name:"wwsun"};  
            (function() {  
                var ds = document.createElement('script');  
                ds.type = 'text/javascript';
                ds.async = true;  
                ds.src = 'http://static.duoshuo.com/embed.js';  
                ds.charset = 'UTF-8';  
                (document.getElementsByTagName('head')[0]
                || document.getElementsByTagName('body')[0]).appendChild(ds);  
            })();
        </script>
    </div><!--#ds-comment-->

    <footer id="colophon" class="site-footer" role="contentinfo">
    <div class="site-info container">
        <div class="row">
            <nav id="menu-social" class="social-icons">
                <ul id="menu-social-items" class="social-menu">
                    <li><a href="https://github.com/wwsun" title="Github" class="rss" target="_blank"><i class="social_icon fa fa-github"><span>Github</span></i></a></li>
                    <li><a href="http://weibo.com/234170023" title="Weibo" class="youtube" target="_blank"><i class="social_icon fa fa-weibo"><span>Weibo</span></i></a></li>
                    <li><a href="https://twitter.com/wsun38" title="Twitter" class="twitter" target="_blank"><i class="social_icon fa fa-twitter"><span>Twitter</span></i></a></li>
                    <li><a href="https://plus.google.com/u/0/101153267739962807712/posts" title="Google+" class="googleplus" target="_blank"><i class="social_icon fa fa-googleplus"><span>GooglePlus</span></i></a></li>
                    <li><a href="/about.html#wechatQr" title="Wechat" class="facebook" target="_blank"><i class="fa fa-weixin"><span>Wechat</span></i></a></li>
                </ul>
            </nav>
            <nav role="navigation" class="col-md-6">
                <ul id="menu-flat-footer" class="nav footer-nav clearfix">
                    <li><a href="http://weibo.com/swwol">Weibo</a></li>
                    <li><a href="https://github.com/wwsun">Github</a></li>
                    <li><a href="http://www.zhihu.com/people/wwsun">Zhihu</a></li>
                    <li><a href="http://www.youtube.com/user/bootstrapbayofficial">Lofter</a></li>
                    <li><a href="http://wwsun.github.io/">Blog</a></li>
                </ul>
            </nav>
            <div class="copyright col-md-6">
                <a href="http://wwsun.github.io/" title="Sparkling">Weiwei SUN</a> All rights reserved. Theme by 
                <a href="http://colorlib.com/" target="_blank">Colorlib</a> Powered by
                <a href="https://pages.github.com/" target="_blank">Github Pages</a> and <a href="https://jekyllrb.com/" target="_blank">Jekyll</a>
            </div>
        </div>
    </div>
    <!-- .site-info -->
    <div class="scroll-to-top"><i class="fa fa-angle-up"></i></div>
    <!-- .scroll-to-top -->
</footer><!-- #colophon -->

<!-- Google Tag Manager -->
<noscript>
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-KJHNXB" height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>

<script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KJHNXB');
</script>
<!-- End Google Tag Manager -->

</body>

</html>