<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>JSON Java Libraries</title>
    <meta name="description" content="">
    <!--<link rel="stylesheet" href="/assets/css/bootstrap.min.css">-->
    <!--<link rel="stylesheet" href="/assets/css/font-awesome.min.css">-->
    <link rel="icon" type="image/png" href="/favicon.ico">
    <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://fonts.useso.com/css?family=Roboto">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/syntax-highlight.css">
    
    <link rel="stylesheet" href="/assets/css/proj-layout.css">
    <script src="/assets/js/swiftype.js"></script>
    <!--<script src="/assets/js/jquery.js"></script>-->
    <!--<script src="/assets/js/modernizr.min.js"></script>-->
    <!--<script src="/assets/js/bootstrap.min.js"></script>-->
</head>

<body>
    <header>
    <nav class="navbar navbar-default" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <p class="site-name"><a class="navbar-brand" href="/" title="twolun">朱子</a></p>
            </div>
            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="/">首页</a></li>
                    <li><a href="/project.html">项目总结</a></li>
                    <li><a href="/list.html">学习笔记</a></li>
                    <li><a href="/about.html">关于我</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- .site-navigation -->
</header>
    <div id="post-content" class="container">
        <br>
        <div class="well">
            <header class="page-header">
                <h1>JSON Java Libraries</h1>
                <p class="post-meta">Sep 7, 2014</p>
            </header>
            <article><p>21世纪初，Douglas Crockford寻找一种简便的数据交换格式，能够在服务器之间交换数据。当时通用的数据交换语言是XML，但是Douglas Crockford觉得XML的生成和解析都太麻烦，所以他提出了一种简化格式，也就是JSON。</p>

<p>JSON, JavaScript Object Notation, 它是一种轻量级的数据交换格式，非常适合于服务器与JavaScript的交互。对消息通信而言，JSON的优势是比XML更简单，因而可以大大提高开发效率，代码也更为简单。</p>

<!--more-->

<h2 id="section">基本语法</h2>
<p>JSON的语法格式非常简单，可以简单的概括如下：</p>

<ul>
  <li>并列的数据之间用	“,”</li>
  <li>映射用				“:”</li>
  <li>并列数据的集合用	“[]”</li>
  <li>映射的集合用		“{}”</li>
</ul>

<p>例如我们可以用如下的JSON文件描述一张图的点集和边集：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
	</span><span class="nt">"nodes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
		</span><span class="p">{</span><span class="w"> </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NodeName"</span><span class="p">},</span><span class="w">
		</span><span class="p">{</span><span class="w"> </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NodeName"</span><span class="p">}</span><span class="w">
	</span><span class="p">],</span><span class="w">
	
	</span><span class="nt">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
		</span><span class="p">{</span><span class="w">
			</span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="err">INDEX</span><span class="p">,</span><span class="w">
			</span><span class="nt">"target"</span><span class="p">:</span><span class="w"> </span><span class="err">INDEX</span><span class="p">,</span><span class="w">
			</span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="err">WEIGHT</span><span class="w">
		</span><span class="p">},</span><span class="w">
		</span><span class="p">{</span><span class="w">
			</span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="err">INDEX，</span><span class="w">
			</span><span class="s2">"target"</span><span class="err">:</span><span class="w"> </span><span class="err">INDEX，</span><span class="w">
			</span><span class="s2">"value"</span><span class="err">:</span><span class="w"> </span><span class="err">WEIGHT</span><span class="w">
		</span><span class="p">}</span><span class="w">	
	</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>解析该文件我们可以发现，这个JSON文件包含了两个数组，分别是 nodes 和 links 。而每个数组中又包含了不同的映射对。到此，JSON的语法基本就结束了。下面我们讨论JSON在Java中的应用。</p>

<p>Java对象/JSON之间的映射非常简单，只有两种数据结构：</p>

<ol>
  <li>Map  用 { } 表示</li>
  <li>Array 用 [ ] 表示</li>
</ol>

<h3 id="map">Map</h3>

<p>简单的说就是Java中的Map，名称-值对的形式给出，名称和值之间用“：”隔开，两个Map之间用“，”隔开，一般表示形式如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="err">'key1':'value1','key2':'value2'</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 id="array">Array</h3>

<p>就是普通意义上的数组，一般形式如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>['arr1','arr2','arr3'];
</code></pre>
</div>

<h3 id="section-1">要点：</h3>

<ol>
  <li>JSON的数据结构只有两种；</li>
  <li>可以嵌套表示，比如Array中可以嵌套Object等；</li>
  <li>记住：Object是以｛｝表示，Array是以[  ]表示；</li>
</ol>

<h2 id="java-with-json">Java with JSON</h2>

<h3 id="jsr-353">JSR 353</h3>
<p>JSR 353为处理JSON提供了官方的解决方案，并作为JEE 7 API的一部分被实现。因此，使用在Java中使用JSON的最合适的方法是使用JSR 353.其在包<code class="highlighter-rouge">javax.json</code>中，<a href="http://docs.oracle.com/javaee/7/api/javax/json/package-summary.html">点击查看API</a>。这方面的内容请参考：</p>

<ol>
  <li><a href="http://www.javabeat.net/java-json-api-jsr-353/">Creating JSON Data Using the Java JSON API (JSR 353)</a></li>
  <li><a href="http://www.java2s.com/Tutorials/Java/JSON/0100__JSON_Java.htm">Java JSON Tutorial</a></li>
  <li><a href="http://www.javabeat.net/2013/10/json-processing-javaee-7-object-model-api/">JSON Processing in Java EE 7 - Using Object Model API</a></li>
  <li><a href="http://www.javabeat.net/2013/10/json-processing-javaee-7-streaming-api/">JSON Processing in Java EE 7 - Using Straeming API</a></li>
</ol>

<h3 id="others">Others</h3>
<p>另外还有有许多的Java库可以用来处理（解析或生成）JSON。Java中最基本的结构是对象，这些库将Java对象映射为JSON，并提供用于序列化和反序列化JSON到对象的方法。Jackson和Gson是建立JSON\对象映射的两个最流行的库。实际开发时可以选择一个你喜欢的，下面将介绍这两个库的具体使用方法。</p>

<p>GSON的项目主页为：
&gt; https://code.google.com/p/google-gson/</p>

<p>在POM中加入GSON的相关依赖</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;dependency&gt;
    &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;
    &lt;artifactId&gt;gson&lt;/artifactId&gt;
    &lt;version&gt;2.3&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
</div>

<p>Jaackson的项目主页为：
&gt; https://github.com/FasterXML/jackson</p>

<p>在POM中加入Jackson的相关依赖</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;
    &lt;artifactId&gt;jackson-mapper-asl&lt;/artifactId&gt;
    &lt;version&gt;1.9.12&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
</div>

<p><del>
JSON在Java上的实现最常用的为Json lib， 其最新版即相关的依赖包的下载地址如下：</del></p>

<div class="highlighter-rouge"><pre class="highlight"><code>http://download.csdn.net/detail/dqsweet/5246564 &lt;/del&gt;
</code></pre>
</div>

<h3 id="pojo">POJO</h3>

<p>定义一个POJO类用来序列化和反序列化JSON。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>public class MyPojo {
    private String thing1;
    private String thing2;

    public MyPojo(){
        System.out.println("*** Constructor MyPojo() called");
    }

    public String getThing1() {
        return thing1;
    }

    public void setThing1(String thing1) {
        this.thing1 = thing1;
    }

    public String getThing2() {
        return thing2;
    }

    public void setThing2(String thing2) {
        this.thing2 = thing2;
    }

    @Override
    public boolean equals(Object obj) {
        if(this == obj) return true;
        if(obj==null || getClass() != obj.getClass()) return false;

        MyPojo myPojo = (MyPojo) obj;

        if(thing1 !=null ? !thing1.equals(myPojo.thing1) : myPojo.thing1 !=null)
            return false;
        if(thing2 !=null ? !thing2.equals(myPojo.thing2) : myPojo.thing2 !=null)
            return false;

        return true;
    }

    @Override
    public int hashCode() {
        int result = thing1 != null ? thing1.hashCode() : 0;
        result = 31 * result + (thing2 != null ? thing2.hashCode() : 0);
        return result;
    }
}
</code></pre>
</div>

<h3 id="gson-demo">GSON Demo</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>MyPojo pojo = new MyPojo();
pojo.setThing1("Hello");
pojo.setThing2("Gson");

Gson gson = new Gson();
String json = gson.toJson(pojo);//序列化pojo为JSON对象
System.out.println(json); //{"thing1":"Hello","thing2":"Gson"}

System.out.println("\nNow create object and populate it with the JSON string.");
MyPojo pojo2 = gson.fromJson(json, MyPojo.class);
System.out.println("Serialized and deserialized object are equal: " + pojo.equals(pojo2));
</code></pre>
</div>

<h3 id="jackson-demo">Jackson Demo</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>MyPojo pojo = new MyPojo();
pojo.setThing1("Hello");
pojo.setThing2("Jackson");

ObjectMapper mapper = new ObjectMapper();
String json = mapper.writeValueAsString(pojo);
System.out.println(json);

System.out.println("\nNow create object and populate it with the JSON string.");
MyPojo pojo2 = mapper.readValue(json, MyPojo.class);
System.out.println("Serialized and deserialized object are equal: " + pojo.equals(pojo2));
</code></pre>
</div>

<p>更多有关两个库的高级实用功能，请参考相关的官方文档。</p>

<blockquote>
  <p>Modified at 11/3/2014, via Weiwei SUN</p>
</blockquote>

<p><del>
####JSON Lib
利用JSON lib可以构建和解析json文件。具体的使用方法可以参考其官方api，这里以构建JSON对象为例，介绍JSON lib的基本使用方法：</del></p>

<div class="highlighter-rouge"><pre class="highlight"><code>http://www.json.org/java/
</code></pre>
</div>

<p>创建JSON对象</p>

<div class="highlighter-rouge"><pre class="highlight"><code>JSONObject json = new JSONObject();	//创建空白
</code></pre>
</div>

<p>或</p>

<div class="highlighter-rouge"><pre class="highlight"><code>JSONObject json = JSONObject.fromObject(object);//从已有字符串构建
</code></pre>
</div>

<p>其输出为：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
	</span><span class="err">//...</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>创建JSON数组</p>

<div class="highlighter-rouge"><pre class="highlight"><code>JSONArray array = new JSONArray();
</code></pre>
</div>

<p>其输出为：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[
	//...
]
</code></pre>
</div>

<p>一个JSON数组中实际是包含了若干的JSON对象，而一个JSON对象其实包含了若干的JSON键值对。</p>

<p>例如：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>JSONObject json = new JSONObject();//the whole document	
JSONArray array = new JSONArray();//a json object array
JSONObject element = new JSONObject();
element.put("name","Allen")
element.put("school","seu");
array.add(element);
json.put("student", array);
</code></pre>
</div>

<p>输出结果为</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
	</span><span class="nt">"student"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
		</span><span class="p">{</span><span class="w">
			</span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allen"</span><span class="p">,</span><span class="w">
			</span><span class="nt">"school"</span><span class="p">:</span><span class="w"> </span><span class="s2">"seu"</span><span class="w">
		</span><span class="p">}</span><span class="w">
	</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w"> </span><span class="err">&lt;/del&gt;</span><span class="w">
</span></code></pre>
</div>

<h3 id="references">References</h3>

<ol>
  <li>http://www.ibm.com/developerworks/cn/web/wa-lo-json/</li>
  <li>http://www.ruanyifeng.com/blog/2009/05/data_types_and_json.html</li>
  <li>http://www.json.org/java/</li>
  <li>http://blog.csdn.net/xiazdong/article/details/7059573</li>
  <li>Client-Server Web Apps with JavaScript and Java, 2014</li>
</ol>
</article>
        </div>
    </div><!--#post-content-->

    <div id="ds-comment" class="container">
        <div class="ds-thread" data-thread-key="/posts/json-java-post.html" data-title="JSON Java Libraries"></div>
        <script>
            var duoshuoQuery = {short_name:"wwsun"};  
            (function() {  
                var ds = document.createElement('script');  
                ds.type = 'text/javascript';
                ds.async = true;  
                ds.src = 'http://static.duoshuo.com/embed.js';  
                ds.charset = 'UTF-8';  
                (document.getElementsByTagName('head')[0]
                || document.getElementsByTagName('body')[0]).appendChild(ds);  
            })();
        </script>
    </div><!--#ds-comment-->

    <footer id="colophon" class="site-footer" role="contentinfo">
    <div class="site-info container">
        <div class="row">
            <nav id="menu-social" class="social-icons">
                <ul id="menu-social-items" class="social-menu">
                    <li><a href="https://github.com/twolun" title="Github" class="rss" target="_blank"><i class="social_icon fa fa-github"><span>Github</span></i></a></li>
                    <li><a href="/about.html#wechatQr" title="Wechat" class="facebook" target="_blank"><i class="fa fa-weixin"><span>Wechat</span></i></a></li>
                </ul>
            </nav>
            <nav role="navigation" class="col-md-6">
                <ul id="menu-flat-footer" class="nav footer-nav clearfix">
                    <li><a href="https://github.com/twolun">Github</a></li>
                    <li><a href="http://twolun.github.io/">Blog</a></li>
                </ul>
            </nav>
            <div class="copyright col-md-6">
                <a href="http://twolun.github.io/" title="Sparkling">朱了</a> All rights reserved. Theme by 
                <a href="https://pages.github.com/" target="_blank">Github Pages</a> and <a href="https://jekyllrb.com/" target="_blank">Jekyll</a>
            </div>
        </div>
    </div>
    <!-- .site-info -->
    <div class="scroll-to-top"><i class="fa fa-angle-up"></i></div>
    <!-- .scroll-to-top -->
</footer><!-- #colophon -->



</body>

</html>