<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Java的对象序列化</title>
    <meta name="description" content="">
    <!--<link rel="stylesheet" href="/assets/css/bootstrap.min.css">-->
    <!--<link rel="stylesheet" href="/assets/css/font-awesome.min.css">-->
    <link rel="icon" type="image/png" href="/favicon.ico">
    <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://fonts.useso.com/css?family=Roboto">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/syntax-highlight.css">
    
    <link rel="stylesheet" href="/assets/css/proj-layout.css">
    <script src="/assets/js/swiftype.js"></script>
    <!--<script src="/assets/js/jquery.js"></script>-->
    <!--<script src="/assets/js/modernizr.min.js"></script>-->
    <!--<script src="/assets/js/bootstrap.min.js"></script>-->
</head>

<body>
    <header>
    <nav class="navbar navbar-default" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <p class="site-name"><a class="navbar-brand" href="/" title="twolun">双轮行</a></p>
            </div>
            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="/">HOME</a></li>
                    <li><a href="/about.html">About</a></li>
                    <li><a href="/project.html">Projects</a></li>
                    <li><a href="/list.html">Posts</a></li>
                    <li><a href="http://wwsun.lofter.com/" target="_blank">Lofter</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- .site-navigation -->
</header>
    <div id="post-content" class="container">
        <br>
        <div class="well">
            <header class="page-header">
                <h1>Java的对象序列化</h1>
                <p class="post-meta">Sep 24, 2014</p>
            </header>
            <article><h3 id="section">为什么需要序列化</h3>

<p>你所创建的对象会随着程序的终止而不复存在，但是，在某些情况下，我们还是希望能够在程序不运行的情况下仍能存在并保存其信息。显然，通过将信息写入文件或数据库可以达到这个目的，但是如果能够声明一个对象为“持久性”的，并为我们处理所有细节，那将会显得十分方便。
<!--more-->
Java的对象序列化将那些实现了Serializable接口的对象转换成一个字节序列，并能在以后将这个直接完全恢复为原来的对象。这一过程甚至可以在网络进行。</p>

<p>序列化实现了Java的轻量级持久性。“持久性”意味着一个对象的生存周期并不取决于程序是否正在执行，它可以生存于程序的调用之间。通过将一个序列化对象写入磁盘，然后在重新调用程序时恢复该对象，就能够实现持久性的效果。“轻量级”在于其需要在程序中显示的序列化与反序列化。</p>

<p>之所以需要对象序列化，主要基于两点考虑：</p>

<ol>
  <li>Java的远程方法调用RMI，它事存活于其他计算机上的对象使用起来就像是存活于本机上一样。但远程对象发送消息时，需要通过对象序列化来传输参数和返回值。</li>
  <li>Java Beans的需要。使用一个Bean时，一般情况下需要在设计阶段对他的状态信息进行配置。这种状态信息必须保存下来，并在程序启动时进行后期恢复，这种工作就是由对象序列化来完成的。</li>
</ol>

<h3 id="section-1">如何进行对象序列化</h3>

<ol>
  <li>让需要序列化的类实现Serializable接口</li>
  <li>提供静态的long型的常量serialVersionUID</li>
  <li>序列化一个对象：首先要创建某些OutputStream对象，然后将其封装在一个ObjectOutputStream对象内。这时，调用writeObject()即可将对象序列化，并将其发送给OutputStream。</li>
  <li>反序列化：将一个InputStream封装在ObjectInputStream内，然后调用readObject()。</li>
  <li>关闭流</li>
</ol>

<p>具体的例子请参考如下链接：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>http://www.tutorialspoint.com/java/java_serialization.htm
</code></pre>
</div>

<h3 id="serialversionuid">为什么需要serialVersionUID</h3>
<p>在Java中，软件的兼容性是一个大问题，尤其在使用到对象串行性的时候，那么在某一个对象已经被串行化了，可是这个对象又被修改后重新部署了，那么在这种情况下， 用老软件来读取新文件格式虽然不是什么难事，但是有可能丢失一些信息。 serialVersionUID来解决这些问题，新增的serialVersionUID必须定义成下面这种形式：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>static final long serialVersionUID=-2805284943658356093L;
</code></pre>
</div>

<p>其中数字后面加上的L表示这是一个long值。 通过这种方式来解决不同的版本之间的串行话问题。</p>

<h3 id="references">References:</h3>
<ol>
  <li>Thinking in Java, chapter 18</li>
  <li>http://www.tutorialspoint.com/java/java_serialization.htm</li>
</ol>
</article>
        </div>
    </div><!--#post-content-->

    <div id="ds-comment" class="container">
        <div class="ds-thread" data-thread-key="/posts/java-serialization-post.html" data-title="Java的对象序列化"></div>
        <script>
            var duoshuoQuery = {short_name:"wwsun"};  
            (function() {  
                var ds = document.createElement('script');  
                ds.type = 'text/javascript';
                ds.async = true;  
                ds.src = 'http://static.duoshuo.com/embed.js';  
                ds.charset = 'UTF-8';  
                (document.getElementsByTagName('head')[0]
                || document.getElementsByTagName('body')[0]).appendChild(ds);  
            })();
        </script>
    </div><!--#ds-comment-->

    <footer id="colophon" class="site-footer" role="contentinfo">
    <div class="site-info container">
        <div class="row">
            <nav id="menu-social" class="social-icons">
                <ul id="menu-social-items" class="social-menu">
                    <li><a href="https://github.com/wwsun" title="Github" class="rss" target="_blank"><i class="social_icon fa fa-github"><span>Github</span></i></a></li>
                    <li><a href="http://weibo.com/234170023" title="Weibo" class="youtube" target="_blank"><i class="social_icon fa fa-weibo"><span>Weibo</span></i></a></li>
                    <li><a href="https://twitter.com/wsun38" title="Twitter" class="twitter" target="_blank"><i class="social_icon fa fa-twitter"><span>Twitter</span></i></a></li>
                    <li><a href="https://plus.google.com/u/0/101153267739962807712/posts" title="Google+" class="googleplus" target="_blank"><i class="social_icon fa fa-googleplus"><span>GooglePlus</span></i></a></li>
                    <li><a href="/about.html#wechatQr" title="Wechat" class="facebook" target="_blank"><i class="fa fa-weixin"><span>Wechat</span></i></a></li>
                </ul>
            </nav>
            <nav role="navigation" class="col-md-6">
                <ul id="menu-flat-footer" class="nav footer-nav clearfix">
                    <li><a href="http://weibo.com/swwol">Weibo</a></li>
                    <li><a href="https://github.com/wwsun">Github</a></li>
                    <li><a href="http://www.zhihu.com/people/wwsun">Zhihu</a></li>
                    <li><a href="http://www.youtube.com/user/bootstrapbayofficial">Lofter</a></li>
                    <li><a href="http://wwsun.github.io/">Blog</a></li>
                </ul>
            </nav>
            <div class="copyright col-md-6">
                <a href="http://wwsun.github.io/" title="Sparkling">Weiwei SUN</a> All rights reserved. Theme by 
                <a href="http://colorlib.com/" target="_blank">Colorlib</a> Powered by
                <a href="https://pages.github.com/" target="_blank">Github Pages</a> and <a href="https://jekyllrb.com/" target="_blank">Jekyll</a>
            </div>
        </div>
    </div>
    <!-- .site-info -->
    <div class="scroll-to-top"><i class="fa fa-angle-up"></i></div>
    <!-- .scroll-to-top -->
</footer><!-- #colophon -->



</body>

</html>